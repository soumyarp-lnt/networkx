{% extends "layouts/base.html" %}

{% block content %}
<div id="force-graph">{{nodes | safe }}</div>
<script src="//unpkg.com/force-graph"></script>

<!--  <script>
  const csrftoken = document.querySelector('[name=csrfmiddlewaretoken]').value;
  function updateCsrf() {
    $.ajaxSetup({
        headers: {
            'X-CSRFTOKEN': csrftoken
        }
      });
  }
    // Random tree
    let gData = {
      nodes: {{nodes | safe }},
      links: {{edges | safe }}
    };

    function updateGraph(data) {
      ForceGraph()(document.getElementById('force-graph')).graphData(data);
    }

    function updateGraphData() {
      $.ajax({
          url: "",
          method:"POST",
          success: function(data){
            gData['nodes'].concat(data['nodes']);
            gData['links'].concat(data['edges']);
            d3.select("#force-graph").remove();
            updateGraph(gData)
            console.log(gData)
          }
      });

      setInterval(updateGraphData, 10000)
    }
    updateGraph(gData)
    updateCsrf()
    updateGraphData()
  </script>-->
<script src="https://d3js.org/d3-dispatch.v2.min.js"></script>
<script src="https://d3js.org/d3-quadtree.v2.min.js"></script>
<script src="https://d3js.org/d3-timer.v2.min.js"></script>
<script src="https://d3js.org/d3-force.v2.min.js"></script>
<script>

var simulation = d3.forceSimulation({{nodes | safe }});

</script>
{% endblock content %}